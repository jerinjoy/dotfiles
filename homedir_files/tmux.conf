# SPDX-FileCopyrightText: 2023 Jerin Joy
#
# SPDX-License-Identifier: Apache-2.0


# Reference:
# https://gist.github.com/andersevenrud/015e61af2fd264371032763d4ed965b6
set -g default-terminal "tmux-256color"
set -ag terminal-overrides ",xterm-256color:RGB"

set -g set-titles on                        # set terminal title
set -g set-titles-string '#h'

# C-b is not acceptable -- Vim uses it
set-option -g prefix C-a
bind-key C-a last-window

# Start numbering at 1
set -g base-index 1
setw -g pane-base-index 1   # make pane numbering consistent with windows

# renumber windows when a window is closed, tmux > 1.6
set -g renumber-windows on

# Allows for faster key repetition
set -s escape-time 0

# Rather than constraining window size to the maximum size of any client
# connected to the *session*, constrain window size to the maximum size of any
# client connected to *that window*. Much more reasonable.
setw -g aggressive-resize off

# set limit to 100k lines.
set -g history-limit 1000000

# set vim keybindings for search
set -g status-keys vi
setw -g mode-keys vi

unbind p
bind p paste-buffer
#bind-key -t vi-copy 'V' begin-selection
#bind-key -t vi-copy 'y' copy-selection

# Move the panes up or down with <C-a> j/k
bind j resize-pane -D 10
bind k resize-pane -U 10
bind l resize-pane -L 10
bind h resize-pane -R 10

#set -g mouse on

# List of plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'

### Tokyo Night Storm tmux theme START

# Status bar
set -g status-position bottom
set -g status-justify left
set -g status-style "bg=#24283b fg=#a9b1d6"
set -g status-left-length 60
set -g status-right-length 100
set -g status-interval 5

# Palette
# Blue  #7aa2f7   Yellow #e0af68   Green #9ece6a
# Red   #f7768e   Pink   #bb9af7   Gray   #565f89
# Text  #a9b1d6   BarBG  #24283b   BandBG #1f2335   Dark #1a1b26

# Make inactive windows visible (adds spacing between them)
set -g window-status-separator " "

##### LEFT — Hostname block with arrow into window strip #####
set -g status-left "#[fg=#1a1b26,bg=#9ece6a,bold] #H #[fg=#9ece6a,bg=#1f2335]"

##### WINDOWS — subtle band for inactive; bright block for active #####
# Base style for inactive windows
setw -g window-status-style "bg=#1f2335,fg=#a9b1d6"

# Inactive windows: colored index, readable name on BandBG
setw -g window-status-format "#[bg=#1f2335,fg=#{?#{==:#I,1},#7aa2f7,#{?#{==:#I,2},#e0af68,#{?#{==:#I,3},#9ece6a,#{?#{==:#I,4},#f7768e,#bb9af7}}}},bold] #I #[fg=#a9b1d6]#W "

# Active window: yellow pill with arrows bridging the band
setw -g window-status-current-format "#[fg=#1f2335,bg=#e0af68]#[fg=#1a1b26,bg=#e0af68,bold] #I #W* #[fg=#e0af68,bg=#1f2335]"

##### RIGHT — Time block with correct left arrow #####
# Put the arrow FIRST: fg = block bg, bg = bar bg
set -g status-right "#[fg=#7aa2f7,bg=#24283b]#[fg=#24283b,bg=#7aa2f7,bold] %a %m/%d %H:%M "

##### Panes / messages #####
set -g pane-border-style "fg=#565f89"
set -g pane-active-border-style "fg=#7aa2f7"
set -g message-style "bg=#24283b fg=#7aa2f7"
set -g message-command-style "bg=#24283b fg=#7aa2f7"

### Tokyo Night Storm tmux theme END

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run -b '~/.tmux/plugins/tpm/tpm'
